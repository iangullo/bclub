<%= form_with model: drill, authenticity_token: true, data: {turbo_frame: "_top"} do |form| %>
  <%= render FieldsComponent.new(fields: @title, form: form) %>
  <%= render FieldsComponent.new(fields: @playbook, form: form) %>
  <div id="drills-form">
    <div id="drills-targets-data">
      <table>
        <tr>
            <td align="right" class="align-top font-semibold"><%= t("target.many") %></td>
            <td colspan="3">
              <%= render NestedComponent.new(model: "drill", key: "targets", form: form, child: DrillTarget.new(priority: form.object.drill_targets.count+1), row: "target_form") %>
            </td>
          </tr>
      </table>
    </div>
    <div if="drill-fields">
      <%= render FieldsComponent.new(fields: @formdata, form: form) %>
      <%= render FieldsComponent.new(fields: @explain, form: form) %>
    </div>
    <div id="skills-data">
      <table>
        <tr>
          <td align="right" class="align-top font-semibold"><%=t("skill.abbr")%></td>
          <td>
            <%= render NestedComponent.new(model: "skills", key: "skills", form: form, child: Skill.new, row: "skill_form") %>
          </td>
          <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
          <td class="align-top"><%= render FieldsComponent.new(fields: @author, form: form) %></td>
        </tr>
      </table>
    </div>
  </div>
  <%= render SubmitComponent.new(close: "cancel", close_return: :back, submit: "save") %>
<% end %>
