<div id="search-box" class="inline-flex">
	<%= form_with(url: @search[:url], method: :get, data: {controller: "search-form", search_text_target: "fsearch", turbo_frame: "search-results"} ) do |fsearch| %>
		<% @search[:fields].each do |opt| %>
		<div class="inline-flex relative align-middle">
			<% if opt[:label].present? %>
				<label for="<%=opt[:key]%>" class="<%=LABEL_CLASS%>"><%=opt[:label]%></label>
			<% end %>
			<% case opt[:kind]%>
				<% when "search-text" %>
					<%=fsearch.text_field opt[:key], placeholder: opt[:placeholder], value: opt[:value], size: opt[:size], class: @search[:i_class], data: @s_action %>
				<% when "search-select" %>
					<%=fsearch.select opt[:key], options_for_select(opt[:options], session.dig(opt[:key].to_sym) ? session.dig(opt[:key].to_sym).to_i : opt[:value]), {include_blank: opt[:blank] || t("scope.all")}, {class: @search[:i_class]}%>
				<% when "search-collection" %>
					<%=fsearch.collection_select opt[:key], opt[:options], :id, :name, {selected: params[opt[:key].to_sym] ? params[opt[:key].to_sym] : opt[:value]}, {class: @search[:i_class]}%>
				<% when "hidden" %>
					<%= fsearch.hidden_field(opt[:key].to_sym, value: opt[:value]) %>
				<% end %>
		</div>
		<% end %>
		<div class="inline-flex align-middle hover:bg-gray-300 rounded-md"><%=image_submit_tag "search.svg", height: 25, alt: t("action.search"), class: "align-middle m-1" %></div>
	<% end %>
</div>